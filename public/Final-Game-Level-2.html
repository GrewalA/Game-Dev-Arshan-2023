<html>
<head>
  <title>Dot Game</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    canvas {
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <script>
    // Get the canvas element and its 2D context
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Set the initial position of the player dot
    let playerX = canvas.width / 2;
    let playerY = canvas.height / 2;

    // Set the initial position and properties of the bullets
    let bullets = [];
    const maxBullets = 3;
    const bulletRadius = 5;
    let bulletCount = 0;

    // Set the properties of the dots
    const dotRadius = 10;
    const playerColor = 'blue';
    const enemyColor = 'red';
    const targetColor = 'white';

    // Set the game over flag
    let gameOver = false;

    // Add event listener for mouse click to fire bullets
    canvas.addEventListener('click', fireBullet);

    // Add event listener to track mouse movement and update player position
    canvas.addEventListener('mousemove', updatePlayerPosition);

    // Game loop
    function gameLoop() {
      if (!gameOver) {
        update();
        render();
        requestAnimationFrame(gameLoop);
      }
    }

    // Update game state
    function update() {
      // Update bullet positions
      bullets.forEach(bullet => {
        bullet.y -= 5; // Adjust bullet speed here

        // Check for bullet-enemy collisions
        checkBulletEnemyCollision(bullet);
      });

      // Remove bullets that have left the canvas
      bullets = bullets.filter(bullet => bullet.y >= 0);

      // Check for player-enemy collisions
      checkPlayerEnemyCollision();
    }

    // Render game objects on the canvas
    function render() {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw player dot
      drawDot(playerX, playerY, dotRadius, playerColor);

      // Draw bullets
      bullets.forEach(bullet => {
        drawDot(bullet.x, bullet.y, bulletRadius, targetColor);
      });

      // Draw enemy dots
      drawDots(canvas.width, canvas.height, dotRadius, enemyColor);
    }

    // Draw a single dot on the canvas
    function drawDot(x, y, radius, color) {
      ctx.beginPath();
      ctx.arc(x, y, radius, 0, Math.PI * 2);
      ctx.fillStyle = color;
      ctx.fill();
      ctx.closePath();
    }

    // Draw multiple enemy dots on the canvas
    function drawDots(width, height, radius, color) {
      const dotCount = 10; // Adjust the number of dots here
      const spacing = width / (dotCount + 1);

      for (let i = 1; i <= dotCount; i++) {
        const x = i * spacing;
        const y = Math.random() * height;

        drawDot(x, y, radius, color);
      }
    }

    // Fire a bullet from the player's position
    function fireBullet() {
      if (bullets.length < maxBullets) {
        bullets.push({ x: playerX, y: playerY });
        bulletCount++;
      }
    }

    // Update the player's position based on mouse movement
    function updatePlayerPosition(event) {
      const rect = canvas.getBoundingClientRect();
      const mouseX = event.clientX - rect.left;
      const mouseY = event.clientY - rect.top;

      playerX = mouseX;
      playerY = mouseY;
    }

    // Check for collisions between bullets and enemies
    function checkBulletEnemyCollision(bullet) {
      // Loop through all enemy dots and check for collisions
      const dotCount = 10; // Adjust the number of dots here
      const spacing = canvas.width / (dotCount + 1);

      for (let i = 1; i <= dotCount; i++) {
        const enemyX = i * spacing;
        const enemyY = Math.random() * canvas.height;

        // Calculate the distance between the bullet and the enemy
        const dx = bullet.x - enemyX;
        const dy = bullet.y - enemyY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // If the distance is less than the sum of the radii, it's a collision
        if (distance < bulletRadius + dotRadius) {
          // Remove the bullet and the enemy dot
          bullets = bullets.filter(b => b !== bullet);
          drawDot(enemyX, enemyY, dotRadius, targetColor);
          spawnEnemy();
          break; // Exit the loop to avoid checking other enemies
        }
      }
    }

    // Check for collisions between the player and enemies
    function checkPlayerEnemyCollision() {
      // Loop through all enemy dots and check for collisions
      const dotCount = 10; // Adjust the number of dots here
      const spacing = canvas.width / (dotCount + 1);

      for (let i = 1; i <= dotCount; i++) {
        const enemyX = i * spacing;
        const enemyY = Math.random() * canvas.height;

        // Calculate the distance between the player and the enemy
        const dx = playerX - enemyX;
        const dy = playerY - enemyY;
        const distance = Math.sqrt(dx * dx + dy * dy);

        // If the distance is less than the sum of the radii, it's a collision
        if (distance < dotRadius + dotRadius) {
          // Game over
          gameOver = true;
          alert('Game Over');
          break; // Exit the loop to avoid checking other enemies
        }
      }
    }

    // Spawn a new enemy dot at a random position
    function spawnEnemy() {
      const dotCount = 10; // Adjust the number of dots here
      const spacing = canvas.width / (dotCount + 1);

      const enemyX = Math.floor(Math.random() * dotCount) * spacing + spacing;
      const enemyY = canvas.height;

      drawDot(enemyX, enemyY, dotRadius, enemyColor);
    }

    // Start the game
    gameLoop();
  </script>
</body>
</html>
