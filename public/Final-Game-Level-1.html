<script>
// global variables here
let myGlobalX = 0;
let myClock = null;
let myScore = 10;
let myGun01 = null;
let myGun02 = null;
let myShooting = 1;

function myHitOther(my1, my2) {
  let left1 = parseInt(document.getElementById(my1).style.left);
  let right1 = left1 + parseInt(document.getElementById(my1).style.width);
  let top1 = parseInt(document.getElementById(my1).style.top);
  let bottom1 = top1 + parseInt(document.getElementById(my1).style.height);
  let left2 = parseInt(document.getElementById(my2).style.left);
  let right2 = left2 + parseInt(document.getElementById(my2).style.width);
  let top2 = parseInt(document.getElementById(my2).style.top);
  let bottom2 = top2 + parseInt(document.getElementById(my2).style.height);
  if (right1 >= left2 && bottom1 >= top2 && left1 <= right2 && top1 <= bottom2) {
    return true;
  }
}

function myCheckHit() {
  document.all.myText01.value = myScore;  // show the present score

  if (myHitOther('myImg01', 'myImg02')) {
    document.getElementById('myImg01').style.left = '20px';
    document.all.myText01.value = 'You hit myImg02';
    myScore -= 1;
  }

  if (myHitOther('myImg01', 'myImg03')) {
    document.getElementById('myImg01').style.left = '20px';
    document.all.myText01.value = 'You hit myImg03';
    myScore -= 1;
  }

  if (myHitOther('myBullet01', 'myImg03')) {
    clearInterval(myGun01);
    document.getElementById('myBullet01').style.left = '-200px';
    document.all.myText01.value = 'You shot myImg03';
    myScore += 1;
  }

  if (myHitOther('myBullet02', 'myImg03')) {
    clearInterval(myGun02);
    document.getElementById('myBullet02').style.left = '-200px';
    document.all.myText01.value = 'You shot myImg03';
    myScore += 1;
  }   

  // you LOSE refresh the page
  if (myScore <= 0) {
    document.all.myText01.value = 'You Lose score at zero!';
    alert('Sorry you lose');
    location.reload();
  }

  // YOU WIN and go to next level!
  if (myHitOther('myImg01', 'myImg04')) {
    document.all.myText01.value = 'You hit myImg04 and you win the game!';
    alert('You Win, now go to the next level');
    document.getElementById('myImg01').style.left = '20px';
    location = 'https://www.google.ca';
  }

  // more if statements here
}

let verticalDirection = 1; // 1 for moving down, -1 for moving up

// Function to update the positions of the elements
function updatePositions() {
  const img02 = document.getElementById('myImg02');
  const img03 = document.getElementById('myImg03');
  const img04 = document.getElementById('myImg04');

  // Get the current top positions of the elements
  let top02 = parseInt(img02.style.top);
  let top03 = parseInt(img03.style.top);
  let top04 = parseInt(img04.style.top);

  // Update the top positions based on the vertical direction
  top02 += 5 * verticalDirection;
  top03 -= 5 * verticalDirection;
  top04 -= 5 * verticalDirection;

  // Check if the elements have reached the top or bottom boundaries
  // Reverse the direction if they have reached the boundaries
  if (top02 <= 0 || top02 >= window.innerHeight - img02.offsetHeight) {
    verticalDirection *= -1;
  }

  if (top03 <= 0 || top03 >= window.innerHeight - img03.offsetHeight) {
    verticalDirection *= -1;
  }

  if (top04 <= 0 || top04 >= window.innerHeight - img04.offsetHeight) {
    verticalDirection *= -1;
  }

  // Update the top positions of the elements
  img02.style.top = top02 + 'px';
  img03.style.top = top03 + 'px';
  img04.style.top = top04 + 'px';

  // Call the collision check function
  myCheckHit();
}

// Start updating the positions every 100 milliseconds
setInterval(updatePositions, 16);
</script>
<body id="myBody" style="background-repeat: repeat; background-size: 80%" background="myBackground01.jpg" onkeydown="{
  let imgLeft = parseInt(document.getElementById('myImg01').style.left);
  let wallLeft = parseInt(document.getElementById('myWall01').style.left) + parseInt(document.getElementById('myWall01').style.width);

  if (event.keyCode === 39 && imgLeft < wallLeft - 10) { // Right arrow key
    document.getElementById('myImg01').style.left = imgLeft + 10 + 'px';
  }

  if (event.keyCode === 68 && imgLeft < wallLeft - 10) { // 'd' key
    document.getElementById('myImg01').style.left = imgLeft + 10 + 'px';
  }

  if (event.keyCode === 87) { // 'w' key
    let imgTop = parseInt(document.getElementById('myImg01').style.top);
    let wallTop = parseInt(document.getElementById('myWall01').style.top) + parseInt(document.getElementById('myWall01').style.height);

    if (imgTop > wallTop) {
      document.getElementById('myImg01').style.top = imgTop - 10 + 'px';
    }
  }

  if (event.keyCode === 83) { // 's' key
    let imgTop = parseInt(document.getElementById('myImg01').style.top);
    let wallTop = parseInt(document.getElementById('myWall02').style.top) + parseInt(document.getElementById('myWall02').style.height);

    if (imgTop < wallTop) {
      document.getElementById('myImg01').style.top = imgTop + 10 + 'px';
    }
  }

  myCheckHit(); // Check for collisions
}">

<h1 align=center><font color=Yellow>Final Game Level 1</font></h1>

<input id="myText01" type="text" value="" size="50" placeholder="Feedback here"><br>

<input type="button" value="Auto Background Left" onclick="{
  document.getElementById('myBody').style.backgroundPositionX = '0px';
  myGlobalX = 0;
  myClock = setInterval(myBackgroundScroll, 50);
}">

<input type="button" value="Right" onclick="{
  let imgLeft = parseInt(document.getElementById('myImg01').style.left);
  let wallLeft = parseInt(document.getElementById('myWall01').style.left) + parseInt(document.getElementById('myWall01').style.width);

  if (imgLeft < wallLeft - 10) { // Subtract 10 to account for myImg01 width
    document.getElementById('myImg01').style.left = imgLeft + 10 + 'px';
  }

  myCheckHit(); // Check for collisions
}">

<!-- Add WASD buttons -->
<input type="button" value="Up" onclick="{
  let imgTop = parseInt(document.getElementById('myImg01').style.top);
  let wallTop = parseInt(document.getElementById('myWall01').style.top) + parseInt(document.getElementById('myWall01').style.height);

  if (imgTop > wallTop) {
    document.getElementById('myImg01').style.top = imgTop - 10 + 'px';
  }

  myCheckHit(); // Check for collisions
}">

<input type="button" value="Down" onclick="{
  let imgTop = parseInt(document.getElementById('myImg01').style.top);
  let wallTop = parseInt(document.getElementById('myWall02').style.top) + parseInt(document.getElementById('myWall02').style.height);

  if (imgTop < wallTop) {
    document.getElementById('myImg01').style.top = imgTop + 10 + 'px';
  }

  myCheckHit(); // Check for collisions
}">



<input type="button" value="shoot" onTouchStart="{this.click(); event.preventDefault();}" onclick="{
  if (myShooting > 2 ){myShooting = 1}
  // Bullet Number 2
  if (myShooting == 2){
    myShooting += 1;
    document.getElementById('myBullet02').style.left = document.getElementById('myImg01').style.left;
    document.getElementById('myBullet02').style.top  = document.getElementById('myImg01').style.top;
    clearInterval(myGun02);
    myGun02 = setInterval(function(){
      document.getElementById('myBullet02').style.left = parseInt(document.getElementById('myBullet02').style.left) + 10 + 'px';
      myCheckHit();
    }, 20);   // speed of bullet faster lower number
  }
  // Bullet Number 1
  if (myShooting == 1){
    myShooting += 1;
    document.getElementById('myBullet01').style.left = document.getElementById('myImg01').style.left;
    document.getElementById('myBullet01').style.top  = document.getElementById('myImg01').style.top;
    clearInterval(myGun01);
    myGun01 = setInterval(function(){
      document.getElementById('myBullet01').style.left = parseInt(document.getElementById('myBullet01').style.left) + 10 + 'px';
      myCheckHit();
    }, 20);   // speed of bullet faster lower number
  }
}"><br><br>





<img id="myImg01" src="myImgNew.jpg"  style="position:absolute; width:100px; height:80px; left: 10px; top:190px;">
<img id="myImg02" src="myImgNew.jpg"  style="position:absolute; width:100px; height:80px; left:700px; top:190px;">
<img id="myImg03" src="myImgNew.jpg"  style="position:absolute; width:100px; height:80px; left:850px; top:190px;">
<img id="myImg04" src="myImgNew.jpg"  style="position:absolute; width:100px; height:80px; left:1000px; top:400px;">

<div id="myWall01" style="position: absolute; width: 10px; height: 100%; background-color: black; opacity: 0.7; z-index: 1;"></div>


<img id="myBullet01" src="myImgNew.jpg"  style="position:absolute; width:10px; height:10px; left: 130px; top:190px;">
<img id="myBullet02" src="myImgNew.jpg"  style="position:absolute; width:10px; height:10px; left: 150px; top:190px;">

